#!/usr/bin/env sh

[ -n "$CI" ] && exit 0

. "$(dirname -- "$0")/_/husky.sh"

npx --no-install commitlint --edit "$1"

filepath="$1"
tmp_file=$(mktemp /tmp/emoji-commitzen.XXXX)

replacements=(
    's/^feat/âœ¨ feat/'
    's/^fix/ðŸ fix/'
    's/^doc/ðŸ“š doc/'
    's/^style/ðŸŽ¨ style/'
    's/^refactor/ðŸ”¨ refactor/'
    's/^perf/ðŸš€ perf/'
    's/^chore/ðŸ”§ chore/'
    's/^lint/ðŸ’„ lint/'
    's/^test/ðŸš¨ test/'
    's/^first/ðŸ£ first/'
)

sed_command=$(printf "%s;" "${replacements[@]}")
cat $filepath | sed "$sed_command" > $tmp_file
mv $tmp_file $filepath
